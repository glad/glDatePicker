/*
	glDatePicker v1.2 - http://code.gautamlad.com/glDatePicker/
	Compiled using Google Closure Compiler - http://closure-compiler.appspot.com/home
*/
(function(c){var r={calId:0,cssName:"default",startDate:-1,endDate:-1,selectedDate:-1,showPrevNext:true,allowOld:true,showAlways:false,position:"absolute",sundayIsFirstDay:true},j={init:function(a){return this.each(function(){var b=c(this),f=c.extend({},r);f.calId=b[0].id+"-gldp";a&&(f=c.extend(f,a));b.data("settings",f);b.click(j.show).focus(j.show);f.showAlways&&setTimeout(function(){b.trigger("focus")},50);c(window).bind("click",function(){j.hide.apply(b)})})},show:function(a){a.stopPropagation();
j.hide.apply(c("._gldp").not(c(this)));j.update.apply(c(this))},hide:function(){if(c(this).length){var a=c(this).data("settings");a.showAlways||(c("#"+a.calId).slideUp(200),c(this).removeClass("_gldp"))}},setStartDate:function(a){c(this).data("settings").startDate=a},setEndDate:function(a){c(this).data("settings").endDate=a},setSelectedDate:function(a){c(this).data("settings").selectedDate=a},update:function(){var a=c(this),b=a.data("settings"),f=b.calId,e=b.startDate;b.startDate==-1&&(e=new Date,
e.setDate(1));e.setHours(0,0,0,0);var q=e.getTime(),d=new Date(0);b.endDate!=-1&&(d=new Date(b.endDate),/^\d+$/.test(b.endDate)&&(d=new Date(e),d.setDate(d.getDate()+b.endDate)));d.setHours(0,0,0,0);var d=d.getTime(),h=new Date(0);b.selectedDate!=-1&&(h=new Date(b.selectedDate),/^\d+$/.test(b.selectedDate)&&(h=new Date(e),h.setDate(h.getDate()+b.selectedDate)));h.setHours(0,0,0,0);var h=h.getTime(),i=a.data("theDate"),i=i==-1||typeof i=="undefined"?e:i,l=new Date(i);l.setDate(1);var r=l.getTime(),
e=new Date(l);e.setMonth(e.getMonth()+1);e.setDate(0);var w=e.getTime(),s=e.getDate(),m=new Date(l);m.setDate(0);m=m.getDate();a.data("theDate",i);for(var e="",x=b.sundayIsFirstDay?1:2,t=0,u=0;t<6;t++){for(var v="",n=0;n<7;n++,u++){var o=m-l.getDay()+u+x,p=o-m,g=b.sundayIsFirstDay?n==0?"sun":n==6?"sat":"day":n==6?"sun":n==5?"sat":"day";if(p>=1&&p<=s){o=new Date;o.setHours(0,0,0,0);var k=new Date(i);k.setHours(0,0,0,0);k.setDate(p);k=k.getTime();g=o.getTime()==k?"today":g;b.allowOld||(g=k<q?"noday":
g);b.endDate!=-1&&(g=k>d?"noday":g);b.selectedDate!=-1&&(g=k==h?"selected":g)}else g="noday",p=p<=0?o:o-s-m;v+="<td class='gldp-days "+g+" **-"+g+"'><div class='"+g+"'>"+p+"</div></td>"}e+="<tr class='days'>"+v+"</tr>"}h=q<r||b.allowOld;d=w<d||d<q;b.showPrevNext||(h=d=false);q="January,February,March,April,May,June,July,August,September,October,November,December".split(",")[i.getMonth()]+" "+i.getFullYear();d="<div class='**'><table><tr>"+("<td class='**-prevnext prev'>"+(h?"\u25c4":"")+"</td>")+
"<td class='**-monyear' colspan='5'>{MY}</td>"+("<td class='**-prevnext next'>"+(d?"\u25ba":"")+"</td>")+"</tr><tr class='**-dow'>"+(b.sundayIsFirstDay?"<td>Sun</td><td>Mon</td><td>Tue</td><td>Wed</td><td>Thu</td><td>Fri</td><td>Sat</td>":"<td>Mon</td><td>Tue</td><td>Wed</td><td>Thu</td><td>Fri</td><td>Sat</td><td>Sun</td>")+"</tr>"+e+"</table><div>";d=d.replace(/\*{2}/gi,"gldp-"+b.cssName).replace(/\{MY\}/gi,q);c("#"+f).length==0&&a.after(c("<div id='"+f+"'></div>").css({position:b.position,"z-index":b.zIndex,
left:a.offset().left,top:a.offset().top+a.outerHeight(true)}));f=c("#"+f);f.html(d).slideDown(200);a.addClass("_gldp");c("[class*=-prevnext]",f).click(function(b){b.stopPropagation();if(c(this).html()!=""){var b=c(this).hasClass("prev")?-1:1,d=new Date(l);d.setMonth(i.getMonth()+b);a.data("theDate",d);j.update.apply(a)}});c("tr.days td:not(.noday, .selected)",f).mouseenter(function(){var a="gldp-"+b.cssName+"-"+c(this).children("div").attr("class");c(this).removeClass(a).addClass(a+"-hover")}).mouseleave(function(){if(!c(this).hasClass("selected")){var a=
"gldp-"+b.cssName+"-"+c(this).children("div").attr("class");c(this).removeClass(a+"-hover").addClass(a)}}).click(function(b){b.stopPropagation();var b=c(this).children("div").html(),d=a.data("settings"),e=new Date(i);e.setDate(b);a.data("theDate",e);a.val(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear());if(d.onChange!=null&&typeof d.onChange!="undefined")d.onChange(a,e);d.selectedDate=e;j.hide.apply(a)})}};c.fn.glDatePicker=function(a){if(j[a])return j[a].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof a==="object"||!a)return j.init.apply(this,arguments);else c.error("Method "+a+" does not exist on jQuery.glDatePicker")}})(jQuery);
